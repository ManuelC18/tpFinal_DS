<br>
<div>
    <h2> Lista de Cursos</h2>
</div>

<div>
    <input [(ngModel)]="cursoId" type="number" placeholder="Ingrese ID del curso">
    <button class="botonBuscarCurso" (click)="getCursoById()">Buscar Curso</button>
</div>
<br>

<!-- Mensaje de Curso Inexistente -->
<h5 *ngIf="cursoNoEncontrado" style="color: red;">Curso Inexistente</h5>


<!-- Tabla para mostrar la lista de cursos -->
<table class="table table-cursos" *ngIf="cursos.length > 0">
    <thead class="table-dark">
        <tr>
            <th>Numero de Curso</th>
            <th>Fecha de Inicio</th>
            <th>Fecha de Fin</th>
            <th>Precio</th>
            <th>Docente</th>
            <th>Alumnos</th>
            <th>Tema</th>
            <th>Eliminar</th>
            <th>Modificar</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let curso of cursos">
            <td>{{curso.id}}</td>
            <td>{{curso.fechaInicio | date: 'dd-MM-yyyy'}}</td>
            <td>{{curso.fechaFin | date: 'dd-MM-yyyy'}}</td> <!-- Formatear la fecha -->
            <td>{{curso.precio}}</td>
            <!-- Muestra el nombre del docente -->
            <td *ngIf="curso.docente; else noDocente">{{curso.docente.nombre}}</td>
            <ng-template #noDocente><td>Docente no asignado</td></ng-template>

            <td>
              <ul>
                  <li *ngFor="let alumno of curso.alumnos">{{alumno.nombre}}</li>
              </ul>
            </td>
            <td>{{curso.tema.nombre}}</td>
            <td>
                <button (click)="deleteCursoById(curso.id)" class="btn btn-danger">Eliminar</button>
            </td>
            <td>
                <button (click)="seleccionarCurso(curso)" class="btn btn-primary">Editar</button>
            </td>
        </tr>
    </tbody>
</table>

<!-- Mensaje cuando no hay cursos en la lista -->
<p *ngIf="cursos.length === 0 && cursoNoEncontrado">No hay cursos disponibles.</p>

<!-- Si se selecciona un curso para editar, mostramos el formulario -->
<div *ngIf="cursoSeleccionado" class="container mt-4">
  <h2 class="mb-4">Editar Curso</h2>
  <form (ngSubmit)="updateCurso()">
    <!-- Fecha de Inicio -->
    <div class="mb-3">
      <label for="fechainicio" class="form-label">Fecha de Inicio:</label>
      <input [(ngModel)]="cursoSeleccionado.fechaInicio" 
            name="fechainicio" 
            type="date" 
            class="form-control" 
            id="fechainicio" 
            required>
    </div>
    
    <!-- Fecha de Fin -->
    <div class="mb-3">
      <label for="fechafin" class="form-label">Fecha de Fin:</label>
      <input [(ngModel)]="cursoSeleccionado.fechaFin" 
            name="fechafin" 
            type="date" 
            class="form-control" 
            id="fechafin" 
            required>
    </div>

    <!-- Precio -->
    <div class="mb-3">
      <label for="precio" class="form-label">Precio:</label>
      <input [(ngModel)]="cursoSeleccionado.precio" 
             name="precio" 
             type="number" 
             class="form-control" 
             id="precio" 
             required>
      
      <div *ngIf="cursoSeleccionado.precio < 0" class="alert alert-danger mt-2">
        El precio no puede ser negativo.
      </div>
    </div>
    

    <!-- Alumnos Inscritos -->
    <div class="mb-3">
      <label class="form-label">Alumnos Inscritos (Selecciona para eliminar):</label>
      <div *ngFor="let alumno of cursoSeleccionado.alumnos">
        <input type="radio" name="alumnoEliminar" [(ngModel)]="alumnoSeleccionadoEliminar" [value]="alumno.id">
        {{ alumno.nombre }}
      </div>
      <button type="button" class="btn btn-danger" (click)="eliminarAlumno()">Eliminar Alumno</button>
    </div>

    <!-- Alumnos Disponibles -->
    <div class="mb-3">
      <label class="form-label">Agregar Alumnos (Selecciona para agregar):</label>
      <div *ngFor="let alumno of alumnosDisponibles">
        <input type="radio" name="alumnoAgregar" [(ngModel)]="alumnoSeleccionadoAgregar" [value]="alumno.id">
        {{ alumno.nombre }}
      </div>
      <button type="button" class="btn btn-primary" (click)="agregarAlumno()">Agregar Alumno</button>
    </div>

    <!-- Docentes -->
    <div class="mb-3">
      <label for="docente" class="form-label">Docente:</label>
      <select [(ngModel)]="cursoSeleccionado.docente" name="docente" class="form-control">
        <option *ngFor="let docente of docentes" [ngValue]="docente">{{ docente.nombre }}</option>
      </select>
    </div>

    <!-- Temas -->
    <div class="mb-3">
      <label for="tema" class="form-label">Tema:</label>
      <select [(ngModel)]="cursoSeleccionado.tema" name="tema" class="form-control">
        <option *ngFor="let tema of temas" [ngValue]="tema">{{ tema.nombre }}</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
  </form>
</div>



<br>